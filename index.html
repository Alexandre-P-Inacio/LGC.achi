<!DOCTYPE html>
<html lang="en">
    <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://unpkg.com https://cdn.jsdelivr.net https://*.azureedge.net https://*.supabase.co; style-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com; img-src 'self' data:; font-src 'self' https://cdnjs.cloudflare.com; connect-src 'self' https://*.supabase.co https://pwsgmskiamkpzgtlaikm.supabase.co;">
    <title>Architecture Portfolio</title>
    <link rel="icon" type="image/png" href="assets/LGC LOGO.png">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="client-dashboard.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Load Supabase first -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        // Initialize Supabase client
        const supabaseUrl = 'https://pwsgmskiamkpzgtlaikm.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB3c2dtc2tpYW1rcHpndGxhaWttIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQzNzM5NzIsImV4cCI6MjA1OTk0OTk3Mn0.oYGnYIpOUteNha2V1EoyhgxDA1XFfzxTjY8jAbSyLmI';
        window.supabase = supabase.createClient(supabaseUrl, supabaseKey);
        console.log('Supabase initialized in index.html');
    </script>
    
    <!-- Then load other scripts -->
    <script src="auth.js" defer></script>
    <script src="animation.js" defer></script>
    <script src="navigation.js"></script>
    <script src="client-dashboard.js" defer></script>
    
    <style>
        /* Fixed Chat Button Styles */
        .fixed-chat-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 80px;
            height: 80px;
            background-color: #333;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
            cursor: pointer;
            z-index: 1000;
            transition: all 0.3s ease;
        }
        
        .fixed-chat-button:hover {
            background-color: #000000c9;
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }
        
        .fixed-chat-button i {
            font-size: 32px;
        }
        
        @media (max-width: 768px) {
            .fixed-chat-button {
                width: 65px;
                height: 65px;
                bottom: 20px;
                right: 20px;
            }
            
            .fixed-chat-button i {
                font-size: 26px;
            }
        }
        
        /* Enhanced Featured Projects Styles */
        #projects {
            padding: 5rem 0;
            background-color: #f8f9fa;
        }
        
        #projects h2 {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 3rem;
            position: relative;
            color: #333;
        }
        
        #projects h2:after {
            content: '';
            display: block;
            width: 80px;
            height: 4px;
            background: linear-gradient(90deg, #333, #828282);
            margin: 15px auto 0;
            border-radius: 2px;
        }
        
        /* Carousel Layout */
        .projects-container {
            position: relative;
            max-width: 1320px; /* Exact width for 3 cards: 3 x 400px + 2 x 32px gaps + padding */
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            align-items: center;
            overflow: visible;
        }
        
        .project-carousel-wrapper {
            width: 100%;
            overflow: hidden;
            position: relative;
            scroll-behavior: smooth;
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE and Edge */
            cursor: grab;
            mask-image: linear-gradient(to right, transparent 0%, black 0%, black 100%, transparent 100%);
            -webkit-mask-image: linear-gradient(to right, transparent 0%, black 0%, black 100%, transparent 100%);
        }
        
        /* Hide scrollbar */
        .project-carousel-wrapper::-webkit-scrollbar {
            display: none;
        }
        
        .project-carousel {
            display: flex;
            gap: 2rem;
            padding: 1rem 0.5rem;
            min-width: max-content;
            justify-content: flex-start;
            margin: 0 auto;
        }
        
        /* Add initial padding to center the first 3 cards */
        @media (min-width: 1200px) {
            .project-carousel-wrapper {
                overflow: hidden;
                padding: 0;
            }
            
            .project-carousel {
                justify-content: center;
            }
        }
        
        /* Scroll Buttons */
        .scroll-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: white;
            color: #333;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            z-index: 10;
            font-size: 1.2rem;
            transition: all 0.3s ease;
            opacity: 0.9;
        }
        
        .scroll-btn:hover {
            background-color: #333;
            color: white;
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
            opacity: 1;
        }
        
        .scroll-btn:focus {
            outline: none;
        }
        
        .scroll-left {
            left: -25px;
        }
        
        .scroll-right {
            right: -25px;
        }
        
        /* Hide scroll buttons when not needed */
        .scroll-btn.hidden {
            display: none;
        }
        
        /* Project Card */
        .project-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            flex: 0 0 auto;
            width: 400px; /* Fixed width for all cards */
            min-width: 350px;
            max-width: 400px;
            display: flex;
            flex-direction: column;
            margin-right: 0;
        }
        
        .project-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }
        
        .project-image {
            height: 240px;
            background-size: cover;
            background-position: center;
            position: relative;
            overflow: hidden;
        }
        
        .project-image::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to bottom, transparent 70%, rgba(0, 0, 0, 0.4));
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .project-card:hover .project-image::before {
            opacity: 1;
        }
        
        .project-card h3 {
            font-size: 1.4rem;
            margin: 1.5rem 1.5rem 0.5rem;
            color: #333;
            font-weight: 600;
        }
        
        .project-card p {
            color: #666;
            margin: 0 1.5rem 1.5rem;
            font-size: 1rem;
        }
        
        .view-project-btn {
            margin: auto 1.5rem 1.5rem;
            padding: 0.8rem 1.5rem;
            background-color: #333;
            color: white;
            text-decoration: none;
            border-radius: 50px;
            text-align: center;
            font-weight: 500;
            text-transform: uppercase;
            font-size: 0.9rem;
            letter-spacing: 0.5px;
            transition: all 0.3s ease;
            display: block;
        }
        
        .view-project-btn:hover {
            background-color: #000;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .no-projects, .error-message {
            width: 100%;
            text-align: center;
            padding: 3rem;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            color: #666;
            font-size: 1.1rem;
        }
        
        .error-message i {
            color: #dc3545;
            font-size: 2rem;
            margin-bottom: 1rem;
            display: block;
        }
        
        .loading-spinner {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 3rem;
            width: 100%;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid #333;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 1.5rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Make the layout responsive */
        @media (max-width: 1200px) {
            .projects-container {
                max-width: 800px; /* Width for 2 cards on tablets */
            }
            
            .project-card {
                width: 360px;
            }
        }
        
        @media (max-width: 768px) {
            #projects {
                padding: 3rem 0;
            }
            
            #projects h2 {
                font-size: 2rem;
                margin-bottom: 2rem;
            }
            
            .projects-container {
                padding: 0 1rem;
                max-width: 400px; /* Width for 1 card on mobile */
            }
            
            .project-carousel {
                gap: 1.5rem;
            }
            
            .project-card {
                width: 360px;
                min-width: 280px;
            }
            
            .project-image {
                height: 200px;
            }
            
            .project-card h3 {
                font-size: 1.2rem;
                margin: 1.2rem 1.2rem 0.4rem;
            }
            
            .project-card p {
                margin: 0 1.2rem 1.2rem;
                font-size: 0.9rem;
            }
            
            .view-project-btn {
                margin: auto 1.2rem 1.2rem;
                padding: 0.7rem 1.2rem;
                font-size: 0.8rem;
            }
            
            .scroll-btn {
                width: 40px;
                height: 40px;
                font-size: 1rem;
            }
            
            .scroll-left {
                left: 5px;
            }
            
            .scroll-right {
                right: 5px;
            }
        }
    </style>
</head>
<body>
    <header>   <script src="navigation.js"></script>    </header>
    <main>
        <section id="hero">
            <div class="hero-slideshow" id="hero-slideshow">
                <div class="hero-slide active"></div>
                <div class="hero-slide"></div>
                <div class="hero-slide"></div>
                <div class="hero-slide"></div>
                <div class="hero-slide"></div>
                <div class="hero-slide"></div>
            </div>
            <div class="slideshow-dots">
                <div class="slideshow-dot active" data-slide="0"></div>
                <div class="slideshow-dot" data-slide="1"></div>
                <div class="slideshow-dot" data-slide="2"></div>
                <div class="slideshow-dot" data-slide="3"></div>
                <div class="slideshow-dot" data-slide="4"></div>
                <div class="slideshow-dot" data-slide="5"></div>
            </div>
            <div class="hero-content">
                <h1>Architecture Portfolio</h1>
            </div>
        </section>

        <section id="projects">
            <h2>Featured Projects</h2>
            <div class="projects-container">
                <button class="scroll-btn scroll-left" id="scroll-left">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <div class="project-carousel-wrapper">
                    <div class="project-carousel" id="featured-projects-container">
                        <!-- Featured projects will be loaded dynamically here -->
                        <div class="loading-spinner">
                            <div class="spinner"></div>
                            <p>Loading featured projects...</p>
                        </div>
                    </div>
                </div>
                <button class="scroll-btn scroll-right" id="scroll-right">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </section>

        <section id="about">
            <div class="about-content">
                <h2>About Us</h2>
                <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Optio porro ipsam velit alias modi quasi a dolor beatae culpa est, cupiditate ratione dicta similique, minima ab nisi officia aliquam. Laborum.</p>
            </div>
        </section>
    </main>

    <!-- Client Dashboard Popup -->
    <div id="client-dashboard-overlay" class="dashboard-overlay">
        <div class="dashboard-popup">
            <div class="dashboard-popup-header">
                <h2>Practices</h2>
                <button class="close-dashboard" onclick="closeDashboard()"><i class="fas fa-times"></i></button>
            </div>
            <div class="dashboard-popup-content">
                <p>Select a practice area below</p>
                <div class="category-grid">
                    <!-- RF Telecommunications -->
                    <div class="category-card" data-category="rf-telecommunications">
                        <div class="category-overlay">
                            <h3>RF & Telecommunications</h3>
                        </div>
                    </div>
                    
                    <!-- Energy -->
                    <div class="category-card" data-category="energy">
                        <div class="category-overlay">
                            <h3>Energy</h3>
                        </div>
                    </div>
                    
                    <!-- Construction -->
                    <div class="category-card" data-category="construction">
                        <div class="category-overlay">
                            <h3>Construction</h3>
                        </div>
                    </div>
                    
                    <!-- Bank Insurance Office -->
                    <div class="category-card" data-category="banking">
                        <div class="category-overlay">
                            <h3>Banking & Finance</h3>
                        </div>
                    </div>
                    
                    <!-- Sand -->
                    <div class="category-card" data-category="sand">
                        <div class="category-overlay">
                            <h3>Stand</h3>
                        </div>
                    </div>
                    
                    <!-- Oil & Gas -->
                    <div class="category-card" data-category="oil-gas">
                        <div class="category-overlay">
                            <h3>Oil & Gas</h3>
                        </div>
                    </div>
                    
                    <!-- Real Estate -->
                    <div class="category-card" data-category="real-estate">
                        <div class="category-overlay">
                            <h3>Real Estate</h3>
                        </div>
                    </div>
                    
                    <!-- Nuclear -->
                    <div class="category-card" data-category="nuclear">
                        <div class="category-overlay">
                            <h3>Nuclear</h3>
                        </div>
                    </div>
                    
                    <!-- Industrial -->
                    <div class="category-card" data-category="industrial">
                        <div class="category-overlay">
                            <h3>Industrial</h3>
                        </div>
                    </div>
                    
                    <!-- Naval -->
                    <div class="category-card" data-category="naval">
                        <div class="category-overlay">
                            <h3>Naval</h3>
                        </div>
                    </div>
                    
                    <!-- BPO -->
                    <div class="category-card" data-category="bpo">
                        <div class="category-overlay">
                            <h3>GDO</h3>
                        </div>
                    </div>
                    
                    <!-- Automotive -->
                    <div class="category-card" data-category="automotive">
                        <div class="category-overlay">
                            <h3>Automotive</h3>
                        </div>
                    </div>
                    
                    <!-- Aerospace -->
                    <div class="category-card" data-category="aerospace">
                        <div class="category-overlay">
                            <h3>Aerospace</h3>
                        </div>
                    </div>
                    
                    <!-- Chemistry-Pharmaceutical -->
                    <div class="category-card" data-category="chemistry-pharmaceutical">
                        <div class="category-overlay">
                            <h3>Chemistry & Pharmaceutical</h3>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Fixed Chat Button -->
    <a href="chat.html" class="fixed-chat-button">
        <i class="fas fa-comments"></i>
        <span class="chat-notification-indicator" id="fixed-chat-notification"></span>
    </a>

    <footer>
        <div class="footer-content">
            <div class="social-links">
                <a href="https://www.instagram.com/lgcarchi/"><i class="fab fa-instagram"></i></a>
                <a href="https://www.facebook.com/profile.php?id=100094347141527"><i class="fab fa-facebook"></i></a>
                <a href="https://twitter.com/ingegneria_lgc"><i class="fab fa-twitter"></i></a>
            </div>
            <p>&copy; 2025 Architecture Portfolio. All rights reserved.</p>
        </div>
    </footer>
    
    <script>
        // Check login status when loading the page
        document.addEventListener('DOMContentLoaded', function() {
            const currentUser = localStorage.getItem('currentUser');
            const isAdmin = localStorage.getItem('isAdmin') === 'true';
            console.log('current login status:', currentUser ? 'Logged in as ' + currentUser : 'Not logged in');
            
            // If the user is logged in, make sure the UI is updated
            if (currentUser && typeof updateUserInterface === 'function') {
                updateUserInterface(currentUser);
            }
            
            // Load featured projects
            loadFeaturedProjects();
            
            // Check for chat notifications
            checkChatNotifications();
        });
        
        // Function to check for unread notifications and show the indicator
        async function checkChatNotifications() {
            try {
                const currentUser = localStorage.getItem('currentUser');
                if (!currentUser || !window.supabase) return;
                
                // Check for unread notifications
                const { data: notifications, error } = await window.supabase
                    .from('notifications')
                    .select('id')
                    .eq('recipient_username', currentUser)
                    .eq('read', false)
                    .limit(1);
                
                if (error) throw error;
                
                // Show notification indicator if there are unread notifications
                const indicator = document.getElementById('fixed-chat-notification');
                if (indicator && notifications && notifications.length > 0) {
                    indicator.classList.add('active');
                }
                
            } catch (error) {
                console.error('Error checking notifications:', error);
            }
        }
        
        // Function to load featured projects from the database
        async function loadFeaturedProjects() {
            try {
                console.log('Starting to load featured projects...');
                
                // Check if Supabase is initialized
                if (!window.supabase) {
                    console.error('Supabase client not initialized');
                    throw new Error('Database connection not initialized');
                }
                
                console.log('Fetching featured projects from database...');
                
                // Fetch featured projects from the database
                const { data: featuredProjects, error } = await window.supabase
                    .from('projects')
                    .select('*')
                    .eq('is_featured', true)
                    .order('created_at', { ascending: false });
                
                if (error) {
                    console.error('Error fetching featured projects:', error);
                    throw error;
                }
                
                console.log('Featured projects fetched:', featuredProjects);
                
                // Get the container element
                const projectsContainer = document.getElementById('featured-projects-container');
                const carouselWrapper = document.querySelector('.project-carousel-wrapper');
                
                // Clear loading indicator
                projectsContainer.innerHTML = '';
                
                if (!featuredProjects || featuredProjects.length === 0) {
                    console.log('No featured projects found');
                    projectsContainer.innerHTML = '<p class="no-projects">No featured projects available at the moment.</p>';
                    
                    // Hide scroll buttons if no projects
                    document.getElementById('scroll-left').classList.add('hidden');
                    document.getElementById('scroll-right').classList.add('hidden');
                    return;
                }
                
                console.log('Starting to render featured projects...');
                
                // Map category to image file
                const categoryImageMap = {
                    'rf-telecommunications': 'assets/Telecomunication.jpg',
                    'energy': 'assets/Energy.jpg',
                    'construction': 'assets/Construction.jpg',
                    'banking': 'assets/Bank-insurance-office.jpg',
                    'sand': 'assets/Stands.jpg',
                    'oil-gas': 'assets/Oil-gas.jpg',
                    'real-estate': 'assets/Real-Estate.jpg',
                    'nuclear': 'assets/Nuclear.png',
                    'industrial': 'assets/Industrial.jpg',
                    'naval': 'assets/Naval.jpg',
                    'bpo': 'assets/GDO.jpg',
                    'automotive': 'assets/Automotive.jpg',
                    'aerospace': 'assets/Aerospace.jpg',
                    'chemistry-pharmaceutical': 'assets/Chemistry-Pharmacy.jpg'
                };
                
                // Default featured project images for fallback
                const featuredImages = [
                    'assets/Featured Project 1.png',
                    'assets/Featured Project 2.png',
                    'assets/Featured Project 3.png'
                ];
                
                // Display each featured project
                featuredProjects.forEach((project, index) => {
                    // Format category name for display
                    let categoryDisplay = 'Uncategorized';
                    if (project.category) {
                        categoryDisplay = project.category
                            .split('-')
                            .map(word => word.charAt(0).toUpperCase() + word.slice(1))
                            .join(' ');
                    }
                    
                    // Create project card element
                    const projectCard = document.createElement('div');
                    projectCard.className = 'project-card';
                    
                    // Determine which image to use
                    let imageUrl;
                    
                    if (project.file_url) {
                        // Use project's own file if available and is an image
                        const fileExt = project.file_url.split('.').pop().toLowerCase();
                        const isImage = ['jpg', 'jpeg', 'png', 'gif', 'webp'].includes(fileExt);
                        
                        if (isImage) {
                            imageUrl = project.file_url;
                        } else {
                            // Use category image if file is not an image
                            imageUrl = categoryImageMap[project.category] || featuredImages[index % featuredImages.length];
                        }
                    } else {
                        // No file, use category image
                        imageUrl = categoryImageMap[project.category] || featuredImages[index % featuredImages.length];
                    }
                    
                    // Fill the project card with content
                    projectCard.innerHTML = `
                        <div class="project-image" style="background-image: url('${imageUrl}')"></div>
                        <h3>${project.name || 'Unnamed Project'}</h3>
                        <p>${categoryDisplay}</p>
                        <a href="portfolios.html?project=${project.id}" class="view-project-btn">View Project</a>
                    `;
                    
                    // Add the project card to the container
                    projectsContainer.appendChild(projectCard);
                });
                
                console.log('Featured projects rendered successfully');
                
                // Hide right button if 3 or fewer projects
                if (featuredProjects.length <= 3) {
                    document.getElementById('scroll-right').classList.add('hidden');
                }
                
                // Initialize carousel functionality
                initCarousel();
                
                // Force reset scroll position to start
                if (carouselWrapper) {
                    carouselWrapper.scrollLeft = 0;
                }
                
            } catch (error) {
                console.error('Error in loadFeaturedProjects:', error);
                const projectsContainer = document.getElementById('featured-projects-container');
                projectsContainer.innerHTML = `
                    <p class="error-message">
                        <i class="fas fa-exclamation-circle"></i>
                        Failed to load featured projects. Please try again later.<br>
                        <small>Error: ${error.message}</small>
                    </p>
                `;
                
                // Hide scroll buttons if error
                document.getElementById('scroll-left').classList.add('hidden');
                document.getElementById('scroll-right').classList.add('hidden');
            }
        }
        
        // Initialize carousel functionality
        function initCarousel() {
            const carouselWrapper = document.querySelector('.project-carousel-wrapper');
            const carousel = document.getElementById('featured-projects-container');
            const leftBtn = document.getElementById('scroll-left');
            const rightBtn = document.getElementById('scroll-right');
            
            if (!carousel || !carouselWrapper || !leftBtn || !rightBtn) return;
            
            const cards = carousel.querySelectorAll('.project-card');
            
            // If we have 3 or fewer cards, hide navigation buttons
            if (cards.length <= 3) {
                leftBtn.classList.add('hidden');
                rightBtn.classList.add('hidden');
                return;
            }
            
            // Show navigation buttons
            leftBtn.classList.remove('hidden');
            rightBtn.classList.remove('hidden');
            
            // Center the carousel to show exactly 3 cards
            const containerWidth = carouselWrapper.clientWidth;
            const cardWidth = cards[0].offsetWidth;
            const gap = 32; // 2rem gap
            const scrollAmount = cardWidth + gap;
            
            // Ensure scroll snapping to cards
            carouselWrapper.style.scrollSnapType = 'x mandatory';
            cards.forEach(card => {
                card.style.scrollSnapAlign = 'center';
            });
            
            // Disable left button initially (we're showing the first 3 cards)
            leftBtn.disabled = true;
            leftBtn.style.opacity = '0.5';
            
            // Scroll left/right with buttons - scroll exactly one card
            leftBtn.addEventListener('click', () => {
                carouselWrapper.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
            });
            
            rightBtn.addEventListener('click', () => {
                carouselWrapper.scrollBy({ left: scrollAmount, behavior: 'smooth' });
            });
            
            // Implement drag-to-scroll functionality
            let isDown = false;
            let startX;
            let scrollLeft;
            
            // Mouse events for desktop
            carouselWrapper.addEventListener('mousedown', (e) => {
                isDown = true;
                carouselWrapper.style.cursor = 'grabbing';
                startX = e.pageX - carouselWrapper.offsetLeft;
                scrollLeft = carouselWrapper.scrollLeft;
                e.preventDefault();
            });
            
            carouselWrapper.addEventListener('mouseleave', () => {
                isDown = false;
                carouselWrapper.style.cursor = 'grab';
            });
            
            carouselWrapper.addEventListener('mouseup', () => {
                isDown = false;
                carouselWrapper.style.cursor = 'grab';
            });
            
            carouselWrapper.addEventListener('mousemove', (e) => {
                if (!isDown) return;
                e.preventDefault();
                const x = e.pageX - carouselWrapper.offsetLeft;
                const walk = (x - startX) * 2; // Scroll speed multiplier
                carouselWrapper.scrollLeft = scrollLeft - walk;
            });
            
            // Touch events for mobile
            carouselWrapper.addEventListener('touchstart', (e) => {
                isDown = true;
                startX = e.touches[0].pageX - carouselWrapper.offsetLeft;
                scrollLeft = carouselWrapper.scrollLeft;
            });
            
            carouselWrapper.addEventListener('touchend', () => {
                isDown = false;
            });
            
            carouselWrapper.addEventListener('touchcancel', () => {
                isDown = false;
            });
            
            carouselWrapper.addEventListener('touchmove', (e) => {
                if (!isDown) return;
                const x = e.touches[0].pageX - carouselWrapper.offsetLeft;
                const walk = (x - startX) * 2;
                carouselWrapper.scrollLeft = scrollLeft - walk;
                e.preventDefault(); // Prevent page scroll
            });
            
            // Update button states on scroll
            carouselWrapper.addEventListener('scroll', () => {
                const scrollPosition = carouselWrapper.scrollLeft;
                const maxScroll = carouselWrapper.scrollWidth - carouselWrapper.clientWidth;
                
                // Enable/disable buttons based on scroll position
                leftBtn.disabled = scrollPosition <= 0;
                leftBtn.style.opacity = scrollPosition <= 0 ? '0.5' : '0.9';
                
                rightBtn.disabled = scrollPosition >= maxScroll;
                rightBtn.style.opacity = scrollPosition >= maxScroll ? '0.5' : '0.9';
            });
        }
    </script>
    
    <!-- Novo script para substituir o slideshow -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Função para substituir completamente as bolinhas
            function corrigirBolinhas() {
                console.log("Substituindo bolinhas para forçar cor branca...");
                
                // Remover container de bolinhas existente
                const dotsContainer = document.querySelector('.slideshow-dots');
                if (dotsContainer) {
                    dotsContainer.remove();
                }
                
                // Criar um novo container de bolinhas
                const novoContainer = document.createElement('div');
                novoContainer.className = 'slideshow-dots';
                novoContainer.style.cssText = `
                    position: absolute;
                    bottom: 20px;
                    left: 50%;
                    transform: translateX(-50%);
                    display: flex;
                    gap: 10px;
                    z-index: 999;
                `;
                
                // Obter o número de slides
                const slides = document.querySelectorAll('.hero-slide');
                
                // Criar as novas bolinhas
                for (let i = 0; i < slides.length; i++) {
                    const novaBolinha = document.createElement('div');
                    novaBolinha.setAttribute('data-slide', i);
                    
                    // Estilo base - bolinhas cinzas
                    novaBolinha.style.cssText = `
                        width: 12px;
                        height: 12px;
                        border-radius: 50%;
                        background-color: rgba(255, 255, 255, 0.5);
                        cursor: pointer;
                        transition: all 0.3s ease;
                    `;
                    
                    // A primeira bolinha começa branca
                    if (i === 0) {
                        novaBolinha.classList.add('active');
                        novaBolinha.style.backgroundColor = '#ffffff';
                        novaBolinha.style.transform = 'scale(1.2)';
                    }
                    
                    // Adicionar evento de clique que ativa o slideshow nessa posição
                    novaBolinha.addEventListener('click', function() {
                        const dots = document.querySelectorAll('.slideshow-dots > div');
                        const index = parseInt(this.getAttribute('data-slide'));
                        
                        // Atualizar todas as bolinhas
                        dots.forEach((dot, idx) => {
                            if (idx === index) {
                                dot.classList.add('active');
                                dot.style.backgroundColor = '#ffffff';
                                dot.style.transform = 'scale(1.2)';
                            } else {
                                dot.classList.remove('active');
                                dot.style.backgroundColor = 'rgba(255, 255, 255, 0.5)';
                                dot.style.transform = 'scale(1)';
                            }
                        });
                        
                        // Usando o slidesFunction para mudar o slide (será definido depois)
                        if (window.goToSlide) {
                            window.goToSlide(index);
                        }
                    });
                    
                    novoContainer.appendChild(novaBolinha);
                }
                
                // Adicionar o container ao hero
                const heroSection = document.getElementById('hero');
                heroSection.appendChild(novoContainer);
                
                return novoContainer.querySelectorAll('div');
            }
            
            // Criar função global para atualizar as bolinhas - será chamada pelo slideshow
            window.atualizarBolinhas = function(index) {
                const dots = document.querySelectorAll('.slideshow-dots > div');
                
                dots.forEach((dot, i) => {
                    if (i === index) {
                        dot.classList.add('active');
                        dot.style.backgroundColor = '#ffffff';
                        dot.style.transform = 'scale(1.2)';
                    } else {
                        dot.classList.remove('active');
                        dot.style.backgroundColor = 'rgba(255, 255, 255, 0.5)';
                        dot.style.transform = 'scale(1)';
                    }
                });
            };
            
            // SLIDESHOW COM EFEITO DE SLIDE HORIZONTAL - SEM AUTOROTAÇÃO
            // Desativar a função initSlideshow original que está causando problemas
            if (window.initSlideshow) {
                window.originalInitSlideshow = window.initSlideshow;
                window.initSlideshow = function() { 
                    console.log('Função original desativada');
                };
            }
            
            // Implementação simplificada com suporte a drag e efeito slide
            function novoSlideshow() {
                console.log('Inicializando slideshow com bolinhas forçadamente brancas');
                const slideContainer = document.querySelector('.hero-slideshow');
                const slides = document.querySelectorAll('.hero-slide');
                
                if (!slides.length) return;
                
                // Criar novas bolinhas no DOM
                const dots = corrigirBolinhas();
                
                // Configuração inicial
                let currentIndex = 0;
                let isDragging = false;
                let startX = 0;
                let currentTranslate = 0;
                let prevTranslate = 0;
                let animationID = 0;
                let isChanging = false;
                
                // Inicializar estado
                slides.forEach((slide, index) => {
                    // Limpar classes existentes
                    slide.classList.remove('active');
                    
                    // Resetar estilos
                    slide.style.position = 'absolute';
                    slide.style.left = '0';
                    slide.style.top = '0';
                    slide.style.width = '100%';
                    slide.style.height = '100%';
                    slide.style.transform = `translateX(${100 * index}%)`;
                    slide.style.transition = 'none';
                    slide.style.opacity = '1';
                    slide.style.zIndex = '1';
                });
                
                // Configurar container
                slideContainer.style.position = 'absolute';
                slideContainer.style.top = '0';
                slideContainer.style.left = '0';
                slideContainer.style.width = '100%';
                slideContainer.style.height = '100%';
                slideContainer.style.overflow = 'hidden';
                slideContainer.style.touchAction = 'none';
                slideContainer.style.cursor = 'grab';
                
                // Criar elemento wrapper para manipular todos os slides juntos
                const slidesWrapper = document.createElement('div');
                slidesWrapper.className = 'slides-wrapper';
                slidesWrapper.style.position = 'absolute';
                slidesWrapper.style.width = '100%';
                slidesWrapper.style.height = '100%';
                slidesWrapper.style.display = 'flex';
                slidesWrapper.style.transform = 'translateX(0)';
                slidesWrapper.style.transition = 'transform 0.3s ease-out';
                
                // Reorganizar os slides dentro do wrapper
                while (slideContainer.firstChild) {
                    slidesWrapper.appendChild(slideContainer.firstChild);
                }
                slideContainer.appendChild(slidesWrapper);
                
                // Recapturar slides após reorganização
                const allSlides = slidesWrapper.querySelectorAll('.hero-slide');
                
                // Configurar slides no wrapper
                allSlides.forEach((slide, index) => {
                    slide.style.position = 'relative';
                    slide.style.minWidth = '100%';
                    slide.style.minHeight = '100%';
                    slide.style.transform = 'none';
                    slide.style.left = '0';
                    // Adicionar atributo de índice para referência
                    slide.setAttribute('data-index', index);
                });
                
                // Monitoramento ativo das bolinhas com requestAnimationFrame
                function animate() {
                    if (!isDragging) {
                        cancelAnimationFrame(animationID);
                        return;
                    }
                    
                    // Atualizar posição do slider
                    slidesWrapper.style.transform = `translateX(${currentTranslate}%)`;
                    
                    // Calcular o índice do slide visível
                    const visibleIndex = Math.round(Math.abs(currentTranslate / 100));
                    if (visibleIndex >= 0 && visibleIndex < slides.length) {
                        // Atualizar as bolinhas
                        window.atualizarBolinhas(visibleIndex);
                    }
                    
                    animationID = requestAnimationFrame(animate);
                }
                
                // Funções principais
                function setPositionByIndex() {
                    currentTranslate = currentIndex * -100;
                    prevTranslate = currentTranslate;
                    slidesWrapper.style.transform = `translateX(${currentTranslate}%)`;
                }
                
                // Função global para ir para um slide específico (será chamada pelas bolinhas)
                window.goToSlide = function(index) {
                    if (index < 0 || index >= slides.length || isChanging) return;
                    
                    isChanging = true;
                    
                    // Atualizar índice
                    currentIndex = index;
                    
                    // Animar a transição
                    slidesWrapper.style.transition = 'transform 0.3s ease-out';
                    setPositionByIndex();
                    
                    // Atualizar bolinhas
                    window.atualizarBolinhas(index);
                    
                    // Permitir nova transição após um tempo
                    setTimeout(() => {
                        isChanging = false;
                    }, 300);
                };
                
                // Função para determinar qual slide está visível
                function getVisibleSlideIndex() {
                    const position = Math.abs(currentTranslate);
                    return Math.round(position / 100);
                }
                
                // Eventos de interação
                function touchStart(event) {
                    if (isChanging) return;
                    
                    event.preventDefault();
                    
                    const touch = event.type.includes('mouse') 
                        ? event 
                        : event.touches[0];
                    
                    startX = touch.clientX;
                    isDragging = true;
                    
                    slideContainer.style.cursor = 'grabbing';
                    
                    // Pausar transição durante o arrasto
                    slidesWrapper.style.transition = 'none';
                    
                    // Iniciar animação para acompanhar as bolinhas
                    cancelAnimationFrame(animationID);
                    animationID = requestAnimationFrame(animate);
                }
                
                function touchMove(event) {
                    if (!isDragging) return;
                    
                    event.preventDefault();
                    
                    const touch = event.type.includes('mouse') 
                        ? event 
                        : event.touches[0];
                    
                    const currentX = touch.clientX;
                    const diff = currentX - startX;
                    
                    // Converter pixels para porcentagem baseado na largura do container
                    const percentMove = (diff / window.innerWidth) * 100;
                    
                    // Atualizar posição com movimento atual
                    currentTranslate = prevTranslate + percentMove;
                    
                    // Limitar arrasto além dos limites
                    const maxTranslate = 0;
                    const minTranslate = (slides.length - 1) * -100;
                    
                    if (currentTranslate > maxTranslate) {
                        currentTranslate = maxTranslate + (currentTranslate - maxTranslate) * 0.3;
                    } else if (currentTranslate < minTranslate) {
                        currentTranslate = minTranslate + (currentTranslate - minTranslate) * 0.3;
                    }
                }
                
                function touchEnd(event) {
                    if (!isDragging) return;
                    
                    isDragging = false;
                    slideContainer.style.cursor = 'grab';
                    
                    // Parar animação
                    cancelAnimationFrame(animationID);
                    
                    // Reativar transição
                    slidesWrapper.style.transition = 'transform 0.3s ease-out';
                    
                    // Determinar o índice mais próximo baseado na posição atual
                    let newIndex = getVisibleSlideIndex();
                    
                    // Garantir que o índice esteja dentro dos limites
                    newIndex = Math.max(0, Math.min(newIndex, slides.length - 1));
                    
                    // Atualizar para o slide mais próximo
                    window.goToSlide(newIndex);
                }
                
                // Adicionar eventos
                slideContainer.addEventListener('mousedown', touchStart, { passive: false });
                slideContainer.addEventListener('touchstart', touchStart, { passive: false });
                
                window.addEventListener('mousemove', touchMove, { passive: false });
                window.addEventListener('touchmove', touchMove, { passive: false });
                
                window.addEventListener('mouseup', touchEnd);
                window.addEventListener('touchend', touchEnd);
                
                window.addEventListener('mouseleave', () => {
                    if (isDragging) touchEnd();
                });
                
                // Navegação por teclado
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'ArrowLeft') window.goToSlide(Math.max(0, currentIndex - 1));
                    if (e.key === 'ArrowRight') window.goToSlide(Math.min(slides.length - 1, currentIndex + 1));
                });
                
                // Inicializar posição
                setPositionByIndex();
                window.atualizarBolinhas(0);
                
                console.log('Slideshow com bolinhas forçadamente brancas inicializado!');
            }
            
            // Executar a nova implementação
            setTimeout(novoSlideshow, 100);
        });
    </script>
</body>
</html>