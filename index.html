<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://unpkg.com https://cdn.jsdelivr.net https://*.azureedge.net https://*.supabase.co; style-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com; img-src 'self' data:; font-src 'self' https://cdnjs.cloudflare.com; connect-src 'self' https://*.supabase.co https://pwsgmskiamkpzgtlaikm.supabase.co;">
    <title>Architecture Portfolio</title>
    <link rel="icon" type="image/png" href="assets/logo(2).png">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="client-dashboard.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Load Supabase first -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- Then load other scripts -->
    <script src="auth.js" defer></script>
    <script src="animation.js" defer></script>
    <script src="navigation.js"></script>
    <script src="client-dashboard.js" defer></script>
    
    <style>
        /* Fixed Chat Button Styles */
        .fixed-chat-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 80px;
            height: 80px;
            background-color: #333;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
            cursor: pointer;
            z-index: 1000;
            transition: all 0.3s ease;
        }
        
        .fixed-chat-button:hover {
            background-color: #000000c9;
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }
        
        .fixed-chat-button i {
            font-size: 32px;
        }
        
        @media (max-width: 768px) {
            .fixed-chat-button {
                width: 65px;
                height: 65px;
                bottom: 20px;
                right: 20px;
            }
            
            .fixed-chat-button i {
                font-size: 26px;
            }
        }
    </style>
</head>
<body>
    <header>   <script src="navigation.js"></script>    </header>
    <main>
        <section id="hero">
            <div class="hero-slideshow">
                <div class="hero-slide active"></div>
                <div class="hero-slide"></div>
                <div class="hero-slide"></div>
                <div class="hero-slide"></div>
                <div class="hero-slide"></div>
                <div class="hero-slide"></div>
            </div>
            <div class="slideshow-dots">
                <div class="slideshow-dot active" data-slide="0"></div>
                <div class="slideshow-dot" data-slide="1"></div>
                <div class="slideshow-dot" data-slide="2"></div>
                <div class="slideshow-dot" data-slide="3"></div>
                <div class="slideshow-dot" data-slide="4"></div>
                <div class="slideshow-dot" data-slide="5"></div>
            </div>
            <div class="hero-content">
                <h1>Architecture Portfolio</h1>
                <p></p>
                <div class="hero-buttons">
                    <a href="#projects" class="cta-button">View Projects</a>
                </div>
            </div>
        </section>

        <section id="projects">
            <h2>Featured Projects</h2>
            <div class="project-grid" id="featured-projects-container">
                <!-- Featured projects will be loaded dynamically here -->
                <div class="loading-spinner">
                    <div class="spinner"></div>
                    <p>Loading featured projects...</p>
                </div>
            </div>
        </section>

        <section id="about">
            <div class="about-content">
                <h2>About Us</h2>
                <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Optio porro ipsam velit alias modi quasi a dolor beatae culpa est, cupiditate ratione dicta similique, minima ab nisi officia aliquam. Laborum.</p>
            </div>
        </section>
    </main>

    <!-- Client Dashboard Popup -->
    <div id="client-dashboard-overlay" class="dashboard-overlay">
        <div class="dashboard-popup">
            <div class="dashboard-popup-header">
                <h2>Practices</h2>
                <button class="close-dashboard" onclick="closeDashboard()"><i class="fas fa-times"></i></button>
            </div>
            <div class="dashboard-popup-content">
                <p>Select a practice area below</p>
                <div class="category-grid">
                    <!-- RF Telecommunications -->
                    <div class="category-card" data-category="rf-telecommunications">
                        <div class="category-overlay">
                            <h3>RF & Telecommunications</h3>
                        </div>
                    </div>
                    
                    <!-- Energy -->
                    <div class="category-card" data-category="energy">
                        <div class="category-overlay">
                            <h3>Energy</h3>
                        </div>
                    </div>
                    
                    <!-- Construction -->
                    <div class="category-card" data-category="construction">
                        <div class="category-overlay">
                            <h3>Construction</h3>
                        </div>
                    </div>
                    
                    <!-- Bank Insurance Office -->
                    <div class="category-card" data-category="banking">
                        <div class="category-overlay">
                            <h3>Banking & Finance</h3>
                        </div>
                    </div>
                    
                    <!-- Sand -->
                    <div class="category-card" data-category="sand">
                        <div class="category-overlay">
                            <h3>Sand & Mining</h3>
                        </div>
                    </div>
                    
                    <!-- Oil & Gas -->
                    <div class="category-card" data-category="oil-gas">
                        <div class="category-overlay">
                            <h3>Oil & Gas</h3>
                        </div>
                    </div>
                    
                    <!-- Real Estate -->
                    <div class="category-card" data-category="real-estate">
                        <div class="category-overlay">
                            <h3>Real Estate</h3>
                        </div>
                    </div>
                    
                    <!-- Nuclear -->
                    <div class="category-card" data-category="nuclear">
                        <div class="category-overlay">
                            <h3>Nuclear</h3>
                        </div>
                    </div>
                    
                    <!-- Industrial -->
                    <div class="category-card" data-category="industrial">
                        <div class="category-overlay">
                            <h3>Industrial</h3>
                        </div>
                    </div>
                    
                    <!-- Naval -->
                    <div class="category-card" data-category="naval">
                        <div class="category-overlay">
                            <h3>Naval</h3>
                        </div>
                    </div>
                    
                    <!-- BPO -->
                    <div class="category-card" data-category="bpo">
                        <div class="category-overlay">
                            <h3>BPO</h3>
                        </div>
                    </div>
                    
                    <!-- Automotive -->
                    <div class="category-card" data-category="automotive">
                        <div class="category-overlay">
                            <h3>Automotive</h3>
                        </div>
                    </div>
                    
                    <!-- Aerospace -->
                    <div class="category-card" data-category="aerospace">
                        <div class="category-overlay">
                            <h3>Aerospace</h3>
                        </div>
                    </div>
                    
                    <!-- Chemistry-Pharmaceutical -->
                    <div class="category-card" data-category="chemistry-pharmaceutical">
                        <div class="category-overlay">
                            <h3>Chemistry & Pharmaceutical</h3>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Fixed Chat Button -->
    <a href="chat.html" class="fixed-chat-button">
        <i class="fas fa-comments"></i>
        <span class="chat-notification-indicator" id="fixed-chat-notification"></span>
    </a>

    <footer>
        <div class="footer-content">
            <div class="social-links">
                <a href="https://www.instagram.com/lgcarchi/"><i class="fab fa-instagram"></i></a>
                <a href="https://www.facebook.com/profile.php?id=100094347141527"><i class="fab fa-facebook"></i></a>
                <a href="https://twitter.com/ingegneria_lgc"><i class="fab fa-twitter"></i></a>
            </div>
            <p>&copy; 2025 Architecture Portfolio. All rights reserved.</p>
        </div>
    </footer>
    
    <script>
        // Check login status when loading the page
        document.addEventListener('DOMContentLoaded', function() {
            const currentUser = localStorage.getItem('currentUser');
            const isAdmin = localStorage.getItem('isAdmin') === 'true';
            console.log('current login status:', currentUser ? 'Logged in as ' + currentUser : 'Not logged in');
            
            // If the user is logged in, make sure the UI is updated
            if (currentUser && typeof updateUserInterface === 'function') {
                updateUserInterface(currentUser);
            }
            
            // Load featured projects
            loadFeaturedProjects();
        });
        
        // Function to load featured projects from the database
        async function loadFeaturedProjects() {
            try {
                // Use the existing Supabase client that was initialized in auth.js
                if (!window.supabase) {
                    throw new Error('Supabase client not initialized');
                }
                
                // Fetch featured projects from the database
                const { data: featuredProjects, error } = await window.supabase
                    .from('projects')
                    .select('id, name, category, file_url, status, created_at')
                    .eq('is_featured', true)
                    .order('created_at', { ascending: false });
                
                if (error) throw error;
                
                // Get the container element
                const projectsContainer = document.getElementById('featured-projects-container');
                
                // Clear loading indicator
                projectsContainer.innerHTML = '';
                
                if (!featuredProjects || featuredProjects.length === 0) {
                    projectsContainer.innerHTML = '<p class="no-projects">No featured projects available at the moment.</p>';
                    return;
                }
                
                // Display each featured project
                featuredProjects.forEach(project => {
                    // Format category name for display
                    let categoryDisplay = 'Uncategorized';
                    if (project.category) {
                        categoryDisplay = project.category
                            .split('-')
                            .map(word => word.charAt(0).toUpperCase() + word.slice(1))
                            .join(' ');
                    }
                    
                    // Create project card element
                    const projectCard = document.createElement('div');
                    projectCard.className = 'project-card';
                    
                    // Determine if we have an image or need to use a placeholder
                    const hasImage = project.file_url;
                    
                    // Generate a random gradient for the placeholder
                    const colors = [
                        ['#3a7bd5', '#00d2ff'], // Blue gradient
                        ['#f2994a', '#f2c94c'], // Orange gradient
                        ['#11998e', '#38ef7d'], // Green gradient
                        ['#FC5C7D', '#6A82FB'], // Pink to purple
                        ['#833ab4', '#fd1d1d'], // Purple to red
                        ['#4568dc', '#b06ab3']  // Blue to purple
                    ];
                    
                    // Select a random gradient based on the project name
                    const colorIndex = Math.abs(project.name.charCodeAt(0) || 0) % colors.length;
                    const [color1, color2] = colors[colorIndex];
                    
                    // Fill the project card with content
                    if (hasImage) {
                        // Use the actual image if available
                        projectCard.innerHTML = `
                            <div class="project-image" style="background-image: url('${project.file_url}')"></div>
                            <h3>${project.name || 'Unnamed Project'}</h3>
                            <p>${categoryDisplay}</p>
                            <a href="portfolios.html?project=${project.id}" class="view-project-btn">View Project</a>
                        `;
                    } else {
                        // Use a gradient placeholder with the project name
                        projectCard.innerHTML = `
                            <div class="project-image project-placeholder" style="background: linear-gradient(135deg, ${color1}, ${color2})">
                                <div class="placeholder-content">
                                    <div class="placeholder-icon"><i class="fas fa-building"></i></div>
                                </div>
                            </div>
                            <h3>${project.name || 'Unnamed Project'}</h3>
                            <p>${categoryDisplay}</p>
                            <a href="portfolios.html?project=${project.id}" class="view-project-btn">View Project</a>
                        `;
                    }
                    
                    // Add the project card to the container
                    projectsContainer.appendChild(projectCard);
                });
                
            } catch (error) {
                console.error('Error loading featured projects:', error);
                const projectsContainer = document.getElementById('featured-projects-container');
                projectsContainer.innerHTML = `
                    <p class="error-message">
                        <i class="fas fa-exclamation-circle"></i>
                        Failed to load featured projects. Please try again later.
                    </p>
                `;
            }
        }
    </script>
</body>
</html>